"use strict";(()=>{var e={};e.id=332,e.ids=[220,332,636],e.modules={237:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1366:(e,t,a)=>{a.d(t,{W:()=>n,Z:()=>l});var s=a(8732);function l({className:e="",...t}){return(0,s.jsx)("div",{className:`rounded-xl border bg-white text-black shadow-sm ${e}`,...t})}function n({className:e="",...t}){return(0,s.jsx)("div",{className:`p-4 ${e}`,...t})}a(2015)},1413:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},1415:e=>{e.exports=import("sonner")},1428:e=>{e.exports=import("axios")},1785:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(8732),l=a(2015),n=a(9844);function r({value:e,onChange:t,placeholder:a}){return(0,s.jsx)("textarea",{value:e,onChange:t,placeholder:a,rows:4,className:"w-full p-2 border border-gray-300 rounded-md text-sm text-black focus:outline-none focus:ring-2 focus:ring-indigo-500"})}var i=a(1366),o=a(4511);function d({label:e,file:t,onFileChange:a}){return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e}),(0,s.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{let t=e.target.files[0];t&&a(t)},className:"block w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 cursor-pointer focus:outline-none"}),t&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["\uD83D\uDCC4 Selected: ",(0,s.jsx)("strong",{children:t.name})]})]})}let c=require("pdfjs-dist");var u=a(2912),m=a.n(u);function h(){let{toast:e}=(0,o.d)(),[t,a]=(0,l.useState)(""),[c,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[p,x]=(0,l.useState)(""),[g,b]=(0,l.useState)(!1),f=(0,l.useRef)(null),j=(0,l.useRef)(null),[y,w]=(0,l.useState)(0),[N,v]=(0,l.useState)(1),[C,S]=(0,l.useState)(0),[A,k]=(0,l.useState)(1),P=async()=>{if(!c)return void e({title:"Please upload a plan file."});let t=new FormData;for(let e of(t.append("plans",c),m&&t.append("specs",m),t.entries()))console.log("\uD83E\uDDFE FormData Field:",e[0],e[1]);b(!0),x("");try{let e=await fetch("http://localhost:3002/analyze",{method:"POST",body:t});if(!e.ok)throw Error("Server returned an error");let a=await e.json();x(a.result||"✅ Plan processed, but no output returned.")}catch(t){console.error("Takeoff error:",t),e({title:"Failed to analyze plan file."})}finally{b(!1)}};return(0,s.jsx)(i.Z,{className:"w-full shadow-xl rounded-2xl p-4",children:(0,s.jsxs)(i.W,{className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"\uD83D\uDCD0 Takeoff Agent"}),(0,s.jsx)(r,{placeholder:"Describe scope (e.g., 10' tall CLF with 3 rails and 2 gates)...",value:t,onChange:e=>a(e.target.value)}),(0,s.jsx)(d,{label:"Upload Plan PDF",file:c,onFileChange:u}),(0,s.jsx)(d,{label:"Upload Specifications PDF/DOC",file:m,onFileChange:h}),(0,s.jsx)(n.$,{onClick:P,disabled:g,children:g?"Running...":"Run Estimate"}),(0,s.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[c&&(0,s.jsxs)("div",{className:"w-[200px]",children:[(0,s.jsx)("h3",{className:"text-md font-semibold text-black mb-1",children:"Plan Preview"}),(0,s.jsx)("canvas",{ref:f,className:"border rounded shadow mb-1 max-w-full h-auto"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-black",children:[(0,s.jsx)("button",{disabled:N<=1,onClick:()=>v(e=>e-1),className:"bg-gray-300 px-2 py-1 rounded disabled:opacity-50",children:"◀ Prev"}),(0,s.jsxs)("span",{children:["Page ",N," of ",y]}),(0,s.jsx)("button",{disabled:N>=y,onClick:()=>v(e=>e+1),className:"bg-gray-300 px-2 py-1 rounded disabled:opacity-50",children:"Next ▶"})]})]}),m&&(0,s.jsxs)("div",{className:"w-[200px]",children:[(0,s.jsx)("h3",{className:"text-md font-semibold text-black mb-1",children:"Spec Preview"}),(0,s.jsx)("canvas",{ref:j,className:"border rounded shadow mb-1 max-w-full h-auto"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-black",children:[(0,s.jsx)("button",{disabled:A<=1,onClick:()=>k(e=>e-1),className:"bg-gray-300 px-2 py-1 rounded disabled:opacity-50",children:"◀ Prev"}),(0,s.jsxs)("span",{children:["Page ",A," of ",C]}),(0,s.jsx)("button",{disabled:A>=C,onClick:()=>k(e=>e+1),className:"bg-gray-300 px-2 py-1 rounded disabled:opacity-50",children:"Next ▶"})]})]})]}),(0,s.jsx)("div",{className:"flex-1 max-h-[600px] overflow-auto bg-gray-100 p-4 rounded-md whitespace-pre-wrap text-black",children:p||"Upload a file and click Run Estimate to begin."})]})]})})}c.GlobalWorkerOptions.workerSrc=m()},2015:e=>{e.exports=require("react")},2051:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>h});var l=a(8732),n=a(2015),r=a(2636),i=a(9844),o=a(6727),d=a(8278),c=a(2912),u=a.n(c),m=e([r]);function h({open:e,onClose:t,agent:a,dept:s}){let[c,u]=(0,n.useState)(!1),[m,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),f=async e=>{let t=await e.arrayBuffer(),a=await (0,d.getDocument)({data:t}).promise,s="";for(let e=1;e<=a.numPages;e++){let t=await a.getPage(e),l=(await t.getTextContent()).items.map(e=>e.str).join(" ");s+=l+"\n"}return s},j=async()=>{if(u(!0),h("Analyzing contract and proposal..."),!p||!g){h("⚠️ Please upload both the GC contract and Zochert proposal."),u(!1);return}try{let e=await f(p),t=await f(g),a=[];e.toLowerCase().includes("general liability")||a.push("⚠️ Missing 'General Liability' clause in GC contract."),e.toLowerCase().includes("indemnify")||a.push("⚠️ No indemnity language found in GC contract."),e.toLowerCase().includes("payment terms")||e.toLowerCase().includes("net")||a.push("⚠️ No clear payment terms in GC contract.");let s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.REACT_APP_OPENAI_API_KEY}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:`You are a construction subcontract legal expert. Carefully review the provided GC contract and subcontractor proposal.
Flag anything unusual or high-risk. Focus especially on:
- Missing or unfavorable indemnity terms
- Insurance requirements (e.g. General Liability, Auto, Umbrella, Workers Comp)
- Payment timelines or conditions (e.g. Pay-When-Paid)
- Scope mismatches
- Liquidated damages or backcharges
- Conflict resolution and termination clauses
- Check for any bad press or pending lawsuits with the client or General Contractor
- Check for special bading requirments for Zochert employees
- Check local laws for where job is to be performened, make sure they match contract`},{role:"user",content:`GC Contract:
${e.slice(0,8e3)}`},{role:"user",content:`Zochert Proposal:
${t.slice(0,8e3)}`}],temperature:.3})}),l=await s.json();l?.choices?.[0]?.message?.content?h(`🧠 AI Legal Review:

${l.choices[0].message.content}`):(console.error(l),h("⚠️ Failed to retrieve analysis from AI."))}catch(e){console.error(e),h("❌ Error processing PDF files or connecting to AI.")}u(!1)};return(0,l.jsxs)(r.lG,{open:e,onOpenChange:t,children:[(0,l.jsx)(r.zM,{asChild:!0}),(0,l.jsxs)(r.Cf,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-gray-900 border border-gray-600 text-white top-[10%] left-1/2 transform -translate-x-1/2 p-4",children:[(0,l.jsxs)(r.c7,{children:[(0,l.jsxs)(r.L3,{className:"text-2xl font-bold text-black",children:["⚖️ ",a]}),(0,l.jsxs)(r.rr,{className:"text-sm text-black mt-1",children:["This AI agent supports the ",(0,l.jsx)("strong",{children:s})," department."]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"gc-upload",className:"text-sm font-medium text-black",children:"Upload GC Contract (PDF)"}),(0,l.jsx)("input",{type:"file",accept:"application/pdf",id:"gc-upload",onChange:e=>x(e.target.files[0]),className:"w-full mt-1 block"}),p&&(0,l.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Uploaded: ",p.name.slice(0,15),p.name.length>15?"…":""]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{htmlFor:"zochert-upload",className:"text-sm font-medium text-black",children:"Upload Zochert Proposal (PDF)"}),(0,l.jsx)("input",{type:"file",accept:"application/pdf",id:"zochert-upload",onChange:e=>b(e.target.files[0]),className:"w-full mt-1 block"}),g&&(0,l.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Uploaded: ",g.name.slice(0,15),g.name.length>15?"…":""]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.$,{onClick:j,disabled:c,className:"w-full bg-green-600 hover:bg-green-700",children:c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"})," Reviewing..."]}):`🚀 Run ${a}`}),m&&(0,l.jsx)("div",{className:"p-4 bg-gray-700 border border-gray-600 rounded-lg text-sm text-gray-100 whitespace-pre-wrap",children:m})]})]})]})}r=(m.then?(await m)():m)[0],d.GlobalWorkerOptions.workerSrc=u(),s()}catch(e){s(e)}})},2636:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{Cf:()=>u,L3:()=>h,c7:()=>m,lG:()=>o,rr:()=>p,zM:()=>d});var l=a(8732),n=a(2015),r=a(3020),i=e([r]);let o=(r=(i.then?(await i)():i)[0]).Root,d=r.Trigger;r.Portal;let c=n.forwardRef(({className:e,...t},a)=>(0,l.jsx)(r.Overlay,{ref:a,className:`fixed inset-0 bg-black/50 backdrop-blur-sm ${e}`,...t}));c.displayName="DialogOverlay";let u=n.forwardRef(({className:e,...t},a)=>(0,l.jsxs)(r.Portal,{children:[(0,l.jsx)(c,{}),(0,l.jsx)(r.Content,{ref:a,className:`fixed left-[50%] top-[50%] max-h-[90vh] w-full max-w-4xl translate-x-[-50%] translate-y-[-50%] rounded-xl bg-white p-6 shadow-lg ${e}`,...t})]}));u.displayName="DialogContent";let m=({className:e,...t})=>(0,l.jsx)("div",{className:`mb-4 ${e}`,...t});m.displayName="DialogHeader";let h=r.Title,p=r.Description;s()}catch(e){s(e)}})},2912:e=>{e.exports=require("pdfjs-dist/build/pdf.worker.entry")},3020:e=>{e.exports=import("@radix-ui/react-dialog")},3873:e=>{e.exports=require("path")},4125:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(8732),l=a(2015),n=a(1366),r=a(9844),i=a(4707);let o=()=>{let[e,t]=(0,l.useState)([]),[a,o]=(0,l.useState)(""),d=e.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.phone.toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase())||e.address.toLowerCase().includes(a.toLowerCase()));return(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(n.Z,{className:"rounded-2xl shadow-md",children:(0,s.jsxs)(n.W,{className:"flex flex-col gap-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCD7"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Employee Directory"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"A live record of all employee contact data entered by the Onboarding Agent."})]})]}),(0,s.jsx)("input",{type:"text",placeholder:"Search directory...",value:a,onChange:e=>o(e.target.value),className:"border p-2 rounded text-black"}),0===d.length?(0,s.jsx)("p",{className:"text-gray-500 italic",children:"No entries found."}):(0,s.jsx)("ul",{className:"space-y-2",children:d.map((e,t)=>(0,s.jsxs)("li",{className:"border p-3 rounded bg-gray-50",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",e.name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Phone:"})," ",e.phone]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Address:"})," ",e.address]})]},t))}),(0,s.jsxs)(r.$,{className:"mt-4",disabled:!0,children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"})," Listening for Entries"]})]})})})}},4437:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(8732),l=a(2015),n=a(1366),r=a(9844),i=a(4707);let o=()=>{let[e,t]=(0,l.useState)({name:"",payRate:"",position:"",phone:"",email:"",address:"",ssn:"",birthdate:"",files:{w4:null,i9:null,orw4:null,directDeposit:null,drugScreen:null,handbook:null}}),[a,o]=(0,l.useState)(null),d=a=>{let{name:s,value:l}=a.target;t({...e,[s]:l})},c=(a,s)=>{t({...e,files:{...e.files,[s]:a.target.files[0]}})};return(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(n.Z,{className:"rounded-2xl shadow-md",children:(0,s.jsxs)(n.W,{className:"flex flex-col gap-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC69‍\uD83D\uDCBC"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Onboarding Agent"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Collects employee info, uploads documents, and runs light online scan."})]})]}),(0,s.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:e.name,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"text",name:"payRate",placeholder:"Pay Rate",value:e.payRate,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"text",name:"position",placeholder:"Position",value:e.position,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:e.phone,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:e.address,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("label",{className:"font-semibold text-gray-700",children:"Birthdate"}),(0,s.jsx)("input",{type:"date",name:"birthdate",value:e.birthdate,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("input",{type:"password",name:"ssn",placeholder:"SSN",value:e.ssn,onChange:d,className:"border p-2 rounded"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[{label:"W-4",field:"w4"},{label:"I-9",field:"i9"},{label:"OR W-4",field:"orw4"},{label:"Direct Deposit",field:"directDeposit"},{label:"Drug Screen",field:"drugScreen"},{label:"Handbook Acknowledgment",field:"handbook"}].map(({label:e,field:t})=>(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{className:"font-semibold text-gray-700 mb-1",children:e}),(0,s.jsx)("input",{type:"file",onChange:e=>c(e,t),className:"border p-2 rounded bg-white"})]},t))}),(0,s.jsxs)(r.$,{onClick:()=>{console.log("Sending to Directory:",{name:e.name,phone:e.phone,email:e.email,address:e.address}),window.__DirectoryAgent__?.receive&&window.__DirectoryAgent__.receive({name:e.name,phone:e.phone,email:e.email,address:e.address}),o("No public red flags found. Web scan completed.")},className:"mt-6",children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"})," Submit"]}),a&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-green-100 text-green-800 rounded",children:["Online Scan Result: ",a]})]})})})}},4511:(e,t,a)=>{a.d(t,{d:()=>s});function s(){return{toast:({title:e="Notice",description:t=""})=>{alert(`${e}${t?": "+t:""}`)}}}},4707:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(6910).A)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]])},4722:e=>{e.exports=require("next-auth/react")},6452:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>o});var l=a(8732),n=a(2015),r=a(1428),i=e([r]);r=(i.then?(await i)():i)[0];let o=()=>{let[e,t]=(0,n.useState)(""),[a,s]=(0,n.useState)(""),[i,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[x,g]=(0,n.useState)(""),[b,f]=(0,n.useState)(null),[j,y]=(0,n.useState)({bobcat:!0,auger:!0});(0,n.useEffect)(()=>{if(!("webkitSpeechRecognition"in window||"SpeechRecognition"in window))return;let e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!1,e.lang="en-US",e.interimResults=!1,e.maxAlternatives=1,e.onresult=e=>{let a=e.results[0][0].transcript;t(a)},f(e)},[]);let w=async()=>{s("Parsing...");try{let t=await r.default.post("http://localhost:5004/api/schedule/create",{inputText:e,equipmentAvailability:j});o(t.data.event||{}),c(!0),s(""),m(null)}catch(e){console.error("Scheduling failed:",e),s("❌ Scheduling failed.")}},N=async()=>{let{"start.dateTime":e,"end.dateTime":a,crew:l,equipment:n}=i;try{let o=await r.default.post("http://localhost:5004/api/schedule/check-conflicts",{start:e,end:a,crew:l,equipment:n});if(!1===o.data.ok){let e=o.data.conflicts.map(e=>"crew"===e.type?`Crew conflict with: ${e.event.summary}`:`Equipment (${e.item}) conflict with: ${e.event.summary}`);m(e.join("\n"));return}let d={...i,colorId:(()=>{let e=i.description?.toLowerCase()||"";return e.includes("boli")?"9":e.includes("standard")||e.includes("base")?"8":e.includes("l&i")||e.includes("washington")?"10":e.includes("davis bacon")?"3":void 0})()};await r.default.post("http://localhost:5004/api/schedule/confirm",d),s("✅ Event scheduled!"),c(!1),t("")}catch(e){console.error("Conflict check or final schedule post failed:",e),s("❌ Failed to confirm schedule.")}},v=e=>{y(t=>({...t,[e]:!t[e]}))};return(0,l.jsxs)("div",{className:"p-4 space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Schedule a Job"}),(0,l.jsx)("input",{type:"text",placeholder:"e.g. Schedule Tara to install with Bobcat next Tuesday 9am",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 border rounded"}),(0,l.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,l.jsx)("button",{onClick:w,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Review Schedule"}),(0,l.jsx)("button",{onClick:()=>{b&&b.start()},className:"bg-gray-600 text-white px-4 py-2 rounded",children:"\uD83C\uDFA4 Speak"})]}),(0,l.jsx)("p",{className:"text-sm mt-2",children:a})]}),(0,l.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Filter by crew",value:h,onChange:e=>p(e.target.value),className:"p-2 border rounded"}),(0,l.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"p-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"All Types"}),(0,l.jsx)("option",{value:"boli",children:"BOLI"}),(0,l.jsx)("option",{value:"standard",children:"Standard"}),(0,l.jsx)("option",{value:"l&i",children:"L&I"}),(0,l.jsx)("option",{value:"davis bacon",children:"Davis Bacon"})]})]}),(0,l.jsxs)("div",{className:"flex gap-6 text-sm items-center",children:[(0,l.jsx)("div",{children:"Equipment Toggle:"}),Object.entries(j).map(([e,t])=>(0,l.jsxs)("label",{className:"flex gap-1 items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:t,onChange:()=>v(e)}),e.charAt(0).toUpperCase()+e.slice(1)]},e))]}),(0,l.jsxs)("div",{className:"flex gap-4 mt-4 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-4 h-4 bg-blue-500 inline-block"})," BOLI"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-4 h-4 bg-gray-400 inline-block"})," Standard"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-4 h-4 bg-green-500 inline-block"})," L&I"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-4 h-4 bg-purple-500 inline-block"})," Davis Bacon"]})]}),(0,l.jsx)("div",{className:"calendar-container rounded overflow-hidden shadow",children:(0,l.jsx)("iframe",{src:`https://calendar.google.com/calendar/embed?src=${encodeURIComponent("blcto2tpkhisonlouirt5kql4c@group.calendar.google.com")}&ctz=America%2FLos_Angeles`,style:{border:0},width:"100%",height:"700",frameBorder:"0",scrolling:"no",title:"Zochert Calendar"})}),d&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg",children:[(0,l.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Confirm Event"}),(0,l.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Summary:"})," ",i.summary]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Location:"})," ",i.location]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Start:"})," ",i["start.dateTime"]]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"End:"})," ",i["end.dateTime"]]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Description:"})," ",i.description]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Crew:"})," ",i.crew]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Equipment:"})," ",(i.equipment||[]).join(", ")]})]}),u&&(0,l.jsxs)("div",{className:"mt-4 text-red-600 whitespace-pre-line text-sm border border-red-300 bg-red-50 p-2 rounded",children:["⚠️ Conflicts detected:",(0,l.jsx)("br",{}),u]}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,l.jsx)("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>c(!1),children:"Cancel"}),(0,l.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded",onClick:N,disabled:!!u,children:"Confirm"})]})]})})]})};s()}catch(e){s(e)}})},6604:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(8732),l=a(2015),n=a(1366),r=a(9844),i=a(4511);function o(){let{toast:e}=(0,i.d)(),[t,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),c=async()=>{a(!0),d(""),e({title:"\uD83D\uDD0D Running LeadAgent..."});try{let t=await fetch("http://localhost:3003/run-lead-agent",{method:"POST"});if(!t.ok)throw Error("Server error running LeadAgent");let a=await t.json();d(a.message||"✅ LeadAgent run completed."),e({title:"✅ LeadAgent finished"})}catch(t){console.error(t),e({title:"❌ Failed to run LeadAgent"}),d("Error running LeadAgent. Check server logs.")}finally{a(!1)}};return(0,s.jsx)(n.Z,{className:"w-full shadow-xl rounded-2xl p-4",children:(0,s.jsxs)(n.W,{className:"flex flex-col gap-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"\uD83D\uDCE1 LeadAgent"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Scans PlanCenterNW.com for fencing leads in OR/WA."}),(0,s.jsx)(r.$,{onClick:c,disabled:t,children:t?"Running...":"Run LeadAgent"}),o&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-gray-100 rounded text-sm whitespace-pre-wrap text-black",children:o})]})})}},6671:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>w});var l=a(8732),n=a(4722),r=a(1366),i=a(9844),o=a(2015),d=a(2636),c=a(1415),u=a(8278),m=a(4125),h=a(6830),p=a(6452),x=a(2051),g=a(4437),b=a(1785),f=a(6604),j=a(8932),y=e([d,c,h,p,x,j]);[d,c,h,p,x,j]=y.then?(await y)():y,u.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${u.version}/pdf.worker.min.js`;let N=["HR","Sales","Finance","Production","Quality Control","Public Relations","Legal"],v={Onboarding:"\uD83D\uDCCB",NewHirePacket:"\uD83D\uDDC2️",EmployeeDirectoryManager:"\uD83D\uDCD7",CommunicationManager:"✉️",StatsReporter:"\uD83D\uDCCA",LeadTracker:"\uD83E\uDDF2",ProposalWriter:"\uD83D\uDCCC",BidSubmitter:"\uD83D\uDCC4",AwardMonitor:"\uD83C\uDFC6",EstimatingAgent:"\uD83D\uDCD0",AccountsReceivable:"\uD83D\uDCB0",AccountsPayable:"\uD83D\uDCB8",DocumentManager:"\uD83D\uDCC1",ContractLogger:"\uD83E\uDDFE",BudgetMonitor:"\uD83E\uDDEA",PreConstructionPlanner:"\uD83D\uDEA7",CrewScheduler:"\uD83D\uDC77",ProjectScheduler:"\uD83D\uDDD6",EquipmentAllocator:"\uD83D\uDD27",SpecValidator:"\uD83D\uDD0D",CustomerFeedback:"\uD83D\uDCE3",TrainingCoordinator:"\uD83D\uDCDA",JobsiteAuditor:"\uD83D\uDEB0",InternalEvents:"\uD83C\uDF89",MarketResearch:"\uD83D\uDCC8",WebsiteSEO:"\uD83C\uDF10",SocialMediaPublisher:"\uD83D\uDCF1",CEOUpdates:"\uD83D\uDCCB",LegalReview:"⚖️",BoardCommunicator:"\uD83D\uDCDD",RiskManager:"\uD83D\uDEA8"},C={HR:[{dept:"Onboarding",agent:"Onboarding",title:"Onboarding Agent",instructions:"Automates the new hire process: forms, routing, HR upload, and DocuSign.",component:g.A},{dept:"Employee Records",agent:"EmployeeDirectoryManager",title:"Directory Agent",instructions:"View and search stored employee contact info collected during onboarding.",component:m.A}],Production:[{dept:"Scheduling",agent:"SchedulingAgent",title:"Scheduling Agent",instructions:"Pulls and schedules jobs using Google Calendar. Assign crews, equipment, and dates.",component:p.A},{dept:"Fleet",agent:"FleetAgent",title:"Fleet Management Agent",instructions:"Manages the service, files, logs, and availability of the truck and equipment fleet.",component:j.A}],Legal:[{dept:"Contract Law Review",agent:"LegalReview",title:"Legal Review Agent",instructions:"Upload the GC contract and Zochert proposal PDFs. The agent will scan for legal red flags and mismatches.",component:x.A}],Finance:[{dept:"Planning",agent:"FinancialPlanningAgent",title:"Financial Planning Agent",instructions:"Analyzes budgets, cash flow, and future projections. Connects with financial systems.",component:h.A}],Sales:[{dept:"Leads",agent:"LeadAgent",title:"Lead Agent",instructions:"Find projects that have fence and/or gates for us to bid. This agent will find projects and download plans and specifications.",component:f.A},{dept:"Bidding/Estimating",agent:"TakeoffAgent",title:"Takeoff Agent",instructions:"Upload plans and describe scope. This agent will generate a full material list, cost summary, and optionally a submittal.",component:b.A}]};function w(){let{data:e,status:t}=(0,n.useSession)(),[a,s]=(0,o.useState)(N[0]),[c,u]=(0,o.useState)(null),[m,h]=(0,o.useState)(null),[p,x]=(0,o.useState)(""),[g,b]=(0,o.useState)(""),f=({agent:e,dept:t,component:a,title:s,instructions:l})=>{u({agent:e,dept:t,component:a,title:s,instructions:l}),h(null),x(""),b("")};return"loading"===t?(0,l.jsx)("div",{className:"p-10 text-center text-gray-700 text-lg",children:"Loading session..."}):e?(0,l.jsxs)("div",{className:"p-8 bg-gradient-to-br from-gray-50 via-gray-100 to-white bg-opacity-70 min-h-screen font-sans text-white",children:[(0,l.jsx)("div",{className:"flex justify-end mb-6",children:(0,l.jsxs)(i.$,{onClick:()=>(0,n.signOut)(),className:"bg-red-600 text-white px-4 py-2 rounded-full hover:bg-red-700",children:["Sign Out (",e.user.name,")"]})}),(0,l.jsxs)("div",{className:"flex flex-col items-center mb-10",children:[(0,l.jsx)("img",{src:"/dc.png",alt:"DreamCon Logo",className:"h-72 mb-6 object-contain bg-transparent"}),(0,l.jsx)("h1",{className:"text-5xl font-extrabold text-center text-gray-700 drop-shadow-sm tracking-tight",children:"AI Agent"})]}),(0,l.jsx)("div",{className:"mb-8 overflow-x-auto",children:(0,l.jsx)("div",{className:"inline-flex gap-4 px-4 py-2 rounded-full bg-gray-700 shadow-inner border border-gray-600 w-full justify-center",children:N.map(e=>(0,l.jsx)("button",{onClick:()=>s(e),className:`w-48 h-14 flex items-center justify-center rounded-full text-md font-semibold transition-all shadow-md ${a===e?"bg-gray-300 text-gray-800":"bg-gray-600 text-white hover:bg-indigo-300 hover:text-black"}`,children:e},e))})}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10",children:C[a]?.map(({dept:e,agent:t,component:a,title:s,instructions:n})=>(0,l.jsx)(r.Z,{className:"shadow-md border border-gray-700 rounded-xl bg-gray-700 hover:shadow-lg transition-transform duration-300",children:(0,l.jsxs)(r.W,{className:"p-6 relative bg-gray-700 rounded-xl",children:[(0,l.jsx)("div",{className:"absolute top-4 right-4 bg-white text-gray-800 w-20 h-20 flex items-center justify-center text-3xl font-bold rounded-full shadow-lg",children:v[t]||"\uD83E\uDD16"}),(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-1 tracking-wide",children:s||e}),(0,l.jsxs)("p",{className:"text-sm text-white italic mb-4",children:["Agent:"," ",(0,l.jsx)("span",{className:"font-medium text-white",children:t})]}),(0,l.jsxs)(d.lG,{open:c?.agent===t,onOpenChange:l=>u(l?{agent:t,dept:e,component:a,title:s,instructions:n}:null),children:[(0,l.jsx)(d.zM,{asChild:!0,children:(0,l.jsx)(i.$,{variant:"default",size:"sm",className:"bg-indigo-600 text-white hover:bg-indigo-700 rounded-full px-4",onClick:()=>f({agent:t,dept:e,component:a,title:s,instructions:n}),children:"Open Agent"})}),c?.agent===t&&a&&(0,l.jsxs)(d.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-black rounded-xl p-6",children:[(0,l.jsxs)(d.c7,{className:"text-black",children:[(0,l.jsx)(d.L3,{className:"text-2xl font-bold text-black",children:s}),(0,l.jsx)(d.rr,{className:"text-sm text-black",children:n})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(a,{open:c?.agent===t,onClose:()=>u(null),agent:t,dept:e})})]})]})]})},`${e}-${t}`))})]}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[(0,l.jsx)("img",{src:"/dc.png",alt:"DreamCon Logo",className:"h-72 mb-6"}),(0,l.jsx)("h1",{className:"text-4xl font-bold mb-4 text-gray-800",children:"AI Agent Dashboard"}),(0,l.jsx)("p",{className:"mb-6 text-gray-600",children:"You must be signed in to continue."}),(0,l.jsx)(i.$,{onClick:()=>(0,n.signIn)("github"),className:"bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700",children:"Sign in with GitHub"})]})}s()}catch(e){s(e)}})},6727:(e,t,a)=>{a.d(t,{A:()=>s});let s=(0,a(6910).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6830:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>u});var l=a(8732),n=a(2015),r=a(1366),i=a(9844),o=a(4707),d=a(1428),c=e([d]);d=(c.then?(await c)():c)[0];let u=()=>{let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),m=async()=>{s(!0),u(null);try{let e=await d.default.post("http://localhost:4000/api/fetch-unpaid-bills");t(e.data.QueryResponse.Bill||[])}catch(e){console.error("Failed to fetch bills:",e),u("Failed to fetch bills. Check console for details.")}finally{s(!1)}};return(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)(r.Z,{className:"rounded-2xl shadow-md",children:(0,l.jsxs)(r.W,{className:"flex flex-col items-start gap-4 p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB8"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Financial Planning Agent"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tracks job costs and automates bill payments by billing period."})]})]}),(0,l.jsxs)(i.$,{onClick:m,className:"mt-2",children:[(0,l.jsx)(o.A,{className:"mr-2 h-4 w-4"})," Fetch Unpaid Bills"]}),a&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Loading bills..."}),c&&(0,l.jsx)("p",{className:"text-sm text-red-500",children:c}),e.length>0&&(0,l.jsxs)("div",{className:"mt-4 w-full",children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"Unpaid Bills"}),(0,l.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,l.jsxs)("li",{className:"border border-gray-300 rounded p-3 bg-gray-50 text-sm",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Vendor:"})," ",e.VendorRef?.name||"N/A"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Date:"})," ",e.TxnDate]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Due:"})," ",e.DueDate]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Balance:"})," $",e.Balance]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Job/Customer:"})," ",e.CustomerRef?.name||"N/A"]})]},e.Id))})]})]})})})};s()}catch(e){s(e)}})},6910:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(2015),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:d,...c},u)=>(0,s.createElement)("svg",{ref:u,...l,width:r,height:r,stroke:a,strokeWidth:o?24*Number(i)/Number(r):i,className:`lucide lucide-${n(e)}`,...c},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...(Array.isArray(d)?d:[d])||[]]));return a.displayName=`${e}`,a}},6995:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>m,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>h,reportWebVitals:()=>b,routeModule:()=>v,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var l=a(3885),n=a(237),r=a(1413),i=a(9616),o=a.n(i),d=a(7522),c=a(8090),u=e([c]);c=(u.then?(await u)():u)[0];let m=(0,r.M)(c,"default"),h=(0,r.M)(c,"getStaticProps"),p=(0,r.M)(c,"getStaticPaths"),x=(0,r.M)(c,"getServerSideProps"),g=(0,r.M)(c,"config"),b=(0,r.M)(c,"reportWebVitals"),f=(0,r.M)(c,"unstable_getStaticProps"),j=(0,r.M)(c,"unstable_getStaticPaths"),y=(0,r.M)(c,"unstable_getStaticParams"),w=(0,r.M)(c,"unstable_getServerProps"),N=(0,r.M)(c,"unstable_getServerSideProps"),v=new l.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:c});s()}catch(e){s(e)}})},7522:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(8732),l=a(4722);function n({Component:e,pageProps:{session:t,...a}}){return(0,s.jsx)(l.SessionProvider,{session:t,children:(0,s.jsx)(e,{...a})})}!function(){var e=Error("Cannot find module '../styles/globals.css'");throw e.code="MODULE_NOT_FOUND",e}()},8090:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>o});var l=a(8732),n=a(4722);!function(){var e=Error("Cannot find module '../components/Login'");throw e.code="MODULE_NOT_FOUND",e}();var r=a(6671),i=e([r]);function o(){let{data:e,status:t}=(0,n.useSession)();return"loading"===t?(0,l.jsx)("div",{children:"Loading..."}):e?(0,l.jsx)(r.A,{}):(0,l.jsx)(Object(function(){var e=Error("Cannot find module '../components/Login'");throw e.code="MODULE_NOT_FOUND",e}()),{})}r=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},8278:e=>{e.exports=require("pdfjs-dist/build/pdf")},8732:e=>{e.exports=require("react/jsx-runtime")},8932:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.d(t,{A:()=>d});var l=a(8732),n=a(2015),r=a(1428),i=e([r]);r=(i.then?(await i)():i)[0];let o={available:"bg-green-100 text-green-800",reserved:"bg-yellow-100 text-yellow-800",service:"bg-red-100 text-red-800"},d=()=>{let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(""),[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),m=async()=>{try{let e=await r.default.get("http://localhost:5005/api/fleet");t(e.data),u("")}catch(e){console.error("Fetch failed:",e),u("❌ Could not load fleet data")}};(0,n.useEffect)(()=>{m()},[]);let h=async(e,t)=>{try{await r.default.post(`http://localhost:5005/api/fleet/${e}/status`,{status:t}),m()}catch(e){console.error("Status update failed:",e),u("❌ Failed to update equipment status")}},p=async()=>{if(!a.trim()||!i.trim())return void u("⚠️ Name and type required.");try{await r.default.post("http://localhost:5005/api/fleet",{name:a.trim(),type:i.trim(),status:"available"}),s(""),d(""),m()}catch(e){console.error("Add failed:",e),u("❌ Failed to add equipment")}};return(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Fleet Manager"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Manage truck and equipment status."}),c&&(0,l.jsx)("p",{className:"text-red-600",children:c}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",placeholder:"Equipment name",value:a,onChange:e=>s(e.target.value),className:"p-2 border rounded w-1/3"}),(0,l.jsx)("input",{type:"text",placeholder:"Type (e.g., Bobcat)",value:i,onChange:e=>d(e.target.value),className:"p-2 border rounded w-1/3"}),(0,l.jsx)("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"➕ Add"})]}),(0,l.jsxs)("table",{className:"w-full text-sm border mt-4",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,l.jsx)("th",{className:"p-2",children:"Name"}),(0,l.jsx)("th",{className:"p-2",children:"Type"}),(0,l.jsx)("th",{className:"p-2",children:"Status"}),(0,l.jsx)("th",{className:"p-2",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"p-2 font-medium",children:e.name}),(0,l.jsx)("td",{className:"p-2",children:e.type}),(0,l.jsx)("td",{className:"p-2",children:(0,l.jsx)("span",{className:`px-2 py-1 rounded ${o[e.status]}`,children:e.status})}),(0,l.jsx)("td",{className:"p-2 flex flex-wrap gap-1",children:Object.keys(o).map(t=>(0,l.jsxs)("button",{onClick:()=>h(e.id,t),className:"px-2 py-1 border rounded text-xs",children:["Mark ",t]},t))})]},e.id))})]})]})};s()}catch(e){s(e)}})},9844:(e,t,a)=>{a.d(t,{$:()=>l});var s=a(8732);function l({children:e,className:t="",...a}){return(0,s.jsx)("button",{className:`px-4 py-2 rounded-xl bg-black text-white hover:bg-gray-800 transition ${t}`,...a,children:e})}}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[616],()=>a(6995));module.exports=s})();